<!--pages/insurance-detail/insurance-detail.wxml-->
<view class="page-container">
  <view class="insurance-header card">
    <view class="insurance-icon">ğŸ›¡ï¸</view>
    <view class="insurance-name">{{insurance.name}}</view>
    <view class="insurance-price">Â¥{{insurance.price}}/å¹´</view>
  </view>
  
  <view class="insurance-content card">
    <view class="content-title">ä¿é™©è¯¦æƒ…</view>
    <view class="content-text">{{insurance.detail || insurance.description}}</view>
  </view>
  
  <view class="insurance-content card" wx:if="{{insurance.coverage}}">
    <view class="content-title">ä¿é™©èŒƒå›´</view>
    <view class="content-text">{{insurance.coverage}}</view>
  </view>
  
  <view class="insurance-content card" wx:if="{{insurance.claimLimit}}">
    <view class="content-title">ç†èµ”é™é¢</view>
    <view class="content-text highlight">{{insurance.claimLimit}}</view>
  </view>
  
  <view class="insurance-content card" wx:if="{{insurance.claimNotice}}">
    <view class="content-title">ç†èµ”é¡»çŸ¥</view>
    <view class="content-text">{{insurance.claimNotice}}</view>
  </view>
  
  <view class="footer">
    <button class="buy-btn" bindtap="buyInsurance">ç«‹å³è´­ä¹°</button>
  </view>
</view>

<!-- è´­ä¹°å¼¹çª— -->
<view class="modal-overlay" wx:if="{{showPurchaseModal}}" bindtap="closePurchaseModal">
  <view class="modal-content" catchtap="stopPropagation">
    <view class="modal-header">
      <text class="modal-title">è´­ä¹°ä¿é™©</text>
      <text class="modal-close" bindtap="closePurchaseModal">Ã—</text>
    </view>
    <scroll-view class="modal-body" scroll-y>
      <view class="form-section">
        <view class="section-title">å® ç‰©ä¿¡æ¯</view>
        <view class="form-item">
          <text class="form-label">å® ç‰©åç§° *</text>
          <input class="form-input" placeholder="è¯·è¾“å…¥å® ç‰©åç§°" placeholder-class="input-placeholder" value="{{purchaseForm.petName}}" bindinput="onFormInput" data-field="petName" />
        </view>
        <view class="form-item">
          <text class="form-label">å® ç‰©ç±»å‹ *</text>
          <view class="pet-type-btns">
            <view class="type-btn {{purchaseForm.petType === 'ç‹—' ? 'active' : ''}}" bindtap="selectPetType" data-type="ç‹—">ç‹—</view>
            <view class="type-btn {{purchaseForm.petType === 'çŒ«' ? 'active' : ''}}" bindtap="selectPetType" data-type="çŒ«">çŒ«</view>
          </view>
        </view>
        <view class="form-item">
          <text class="form-label">å® ç‰©å¹´é¾„ *</text>
          <input class="form-input" type="number" placeholder="è¯·è¾“å…¥å® ç‰©å¹´é¾„" placeholder-class="input-placeholder" value="{{purchaseForm.petAge}}" bindinput="onFormInput" data-field="petAge" />
        </view>
        <view class="form-item">
          <text class="form-label">å® ç‰©å“ç§</text>
          <input class="form-input" placeholder="è¯·è¾“å…¥å® ç‰©å“ç§ï¼ˆé€‰å¡«ï¼‰" placeholder-class="input-placeholder" value="{{purchaseForm.petBreed}}" bindinput="onFormInput" data-field="petBreed" />
        </view>
      </view>
      <view class="form-section">
        <view class="section-title">æ”¶æ¬¾ä¿¡æ¯</view>
        <view class="form-item">
          <text class="form-label">æ”¶æ¬¾äººå§“å *</text>
          <input class="form-input" placeholder="è¯·è¾“å…¥æ”¶æ¬¾äººå§“å" placeholder-class="input-placeholder" value="{{purchaseForm.payeeName}}" bindinput="onFormInput" data-field="payeeName" />
        </view>
        <view class="form-item">
          <text class="form-label">æ”¶æ¬¾äººç”µè¯ *</text>
          <input class="form-input" type="number" placeholder="è¯·è¾“å…¥æ”¶æ¬¾äººç”µè¯" placeholder-class="input-placeholder" value="{{purchaseForm.payeePhone}}" bindinput="onFormInput" data-field="payeePhone" />
        </view>
        <view class="form-item">
          <text class="form-label">æ”¶æ¬¾è´¦å· *</text>
          <input class="form-input" placeholder="è¯·è¾“å…¥æ”¶æ¬¾è´¦å·" placeholder-class="input-placeholder" value="{{purchaseForm.payeeAccount}}" bindinput="onFormInput" data-field="payeeAccount" />
        </view>
      </view>
      <view class="form-section">
        <view class="section-title">ä¿é™©ç”Ÿæ•ˆä¿¡æ¯</view>
        <view class="form-item">
          <text class="form-label">ç”Ÿæ•ˆæ—¥æœŸ *</text>
          <picker mode="date" value="{{purchaseForm.startDate}}" bindchange="onDateChange">
            <view class="form-input picker">{{purchaseForm.startDate || 'è¯·é€‰æ‹©ç”Ÿæ•ˆæ—¥æœŸ'}}</view>
          </picker>
        </view>
        <view class="form-item">
          <text class="form-label">ä¿é™©è´¹ç”¨</text>
          <view class="price-display">Â¥{{insurance.price}}/å¹´</view>
        </view>
      </view>
    </scroll-view>
    <view class="modal-footer">
      <button class="modal-cancel-btn" bindtap="closePurchaseModal">å–æ¶ˆ</button>
      <button class="modal-confirm-btn" bindtap="submitPurchase">ç¡®è®¤è´­ä¹°</button>
    </view>
  </view>
</view>


