<!--pages/claim-list/claim-list.wxml-->
<view class="page-container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ç”³ä¿è®°å½•</view>
    <view class="header-subtitle">æŸ¥çœ‹æ‚¨çš„æ‰€æœ‰ç†èµ”ç”³è¯·è®°å½•</view>
  </view>

  <!-- ç­›é€‰åŒºåŸŸ -->
  <view class="search-section card">
    <view class="filter-label">ç”³è¯·çŠ¶æ€ï¼š</view>
    <view class="filter-buttons">
      <view class="filter-btn {{searchStatus === '' ? 'active' : ''}}" bindtap="filterByStatus" data-status="">å…¨éƒ¨</view>
      <view class="filter-btn {{searchStatus === 'å¾…å®¡æ ¸' ? 'active' : ''}}" bindtap="filterByStatus" data-status="å¾…å®¡æ ¸">å¾…å®¡æ ¸</view>
      <view class="filter-btn {{searchStatus === 'å®¡æ ¸é€šè¿‡' ? 'active' : ''}}" bindtap="filterByStatus" data-status="å®¡æ ¸é€šè¿‡">å®¡æ ¸é€šè¿‡</view>
      <view class="filter-btn {{searchStatus === 'å®¡æ ¸æ‹’ç»' ? 'active' : ''}}" bindtap="filterByStatus" data-status="å®¡æ ¸æ‹’ç»">å®¡æ ¸æ‹’ç»</view>
      <view class="filter-btn {{searchStatus === 'å·²æ‰“æ¬¾' ? 'active' : ''}}" bindtap="filterByStatus" data-status="å·²æ‰“æ¬¾">å·²æ‰“æ¬¾</view>
    </view>
  </view>

  <!-- ç”³ä¿è®°å½•åˆ—è¡¨ -->
  <view class="claim-list">
    <view class="claim-card card" wx:for="{{claimList}}" wx:key="id">
      <!-- å¤´éƒ¨ -->
      <view class="claim-header">
        <view class="claim-info">
          <view class="claim-no">ç†èµ”ç¼–å·ï¼š{{item.claimNo}}</view>
          <view class="status-tag {{getStatusClass(item.status)}}">{{item.status}}</view>
        </view>
        <view class="claim-time">{{item.createTime}}</view>
      </view>

      <!-- ä¸»ä½“ -->
      <view class="claim-body">
        <view class="detail-row">
          <text class="label">ä¿é™©åç§°ï¼š</text>
          <text class="value">{{item.insuranceName}}</text>
        </view>
        <view class="detail-row">
          <text class="label">å® ç‰©ä¿¡æ¯ï¼š</text>
          <text class="value">{{item.petName}}</text>
        </view>
        <view class="detail-row">
          <text class="label">ç”³è¯·åŸå› ï¼š</text>
          <text class="value">{{item.reason}}</text>
        </view>
        <view class="detail-row">
          <text class="label">æƒ…å†µæè¿°ï¼š</text>
          <text class="value description-text">{{item.description}}</text>
        </view>
        
        <!-- ç†èµ”é‡‘é¢ -->
        <view class="detail-row" wx:if="{{item.claimAmount}}">
          <text class="label">ç†èµ”é‡‘é¢ï¼š</text>
          <text class="value amount">Â¥{{item.claimAmount}}</text>
        </view>
        
        <!-- æ‹’ç»åŸå›  -->
        <view class="reject-row" wx:if="{{item.status === 'å®¡æ ¸æ‹’ç»' && item.rejectReason}}">
          <view class="detail-row">
            <text class="label">æ‹’ç»åŸå› ï¼š</text>
            <text class="value">{{item.rejectReason}}</text>
          </view>
        </view>
        
        <!-- ç®¡ç†å‘˜å¤‡æ³¨ -->
        <view class="detail-row" wx:if="{{item.adminRemark}}">
          <text class="label">å¤‡æ³¨ä¿¡æ¯ï¼š</text>
          <text class="value">{{item.adminRemark}}</text>
        </view>

        <!-- ä½è¯å›¾ç‰‡ -->
        <view class="evidence-section" wx:if="{{item.images && item.images.length > 0}}">
          <view class="evidence-label">ä½è¯å›¾ç‰‡ï¼š</view>
          <view class="evidence-images">
            <image 
              class="evidence-image" 
              wx:for="{{item.images}}" 
              wx:key="index" 
              wx:for-item="img"
              src="{{img}}" 
              mode="aspectFill"
              bindtap="previewImage"
              data-images="{{item.images}}"
              data-current="{{img}}">
            </image>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{claimList.length === 0}}">
    <view class="empty-icon">ğŸ“„</view>
    <view class="empty-text">æš‚æ— ç”³ä¿è®°å½•</view>
  </view>
</view>


